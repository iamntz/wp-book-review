### Refactor

Pentru că vrem să separăm PHP de HTML vom folosi Handlebars. Și pentru că Handlebars este instalabil (și) prin Composer, vom folosi... ei bine, Composer.

Pentru asta va trebui să deschidem o consolă (cmd/terminal, în funcție de platformă) și să executăm `composer init`. Urmărim instrucțiunile, iar la dependințe adăugăm `xamin/handlebars.php`. Restul instrucțiunilor sunt cele default.

Edităm `composer.json` și adăugăm următoarea cheie pentru a spune autoloader-ului în ce director ar trebui să caute bibliotecile:

```json
"autoload": {
  "psr-4": {
    "bookReview\\": "inc/bookReview"
  }
}
```

Executăm și `composer update` pentru a instala tot ce este necesar și am terminat pasul ăsta.

În `index.php` facem următoarele modificări:

```diff
+++ b/index.php
@@ -21,8 +21,7 @@ define('BOOK_TAX_GENRE', 'book_genre');
 define('BOOK_TAX_AUTHOR', 'book_author');
 define('BOOK_TAX_PUBLISHER', 'book_publisher');

-require_once 'inc/bookReview/PostTypes.php';
-require_once 'inc/bookReview/BookReviewWidget.php';
+require_once 'vendor/autoload.php';

 add_action('init', function () {
     new bookReview\PostTypes;
@@ -33,8 +32,6 @@ register_activation_hook(__FILE__, function () {
     flush_rewrite_rules();
 });

-require_once 'inc/bookReview/Metabox.php';
-
 add_action('admin_init', function () {
     new bookReview\Metabox();
 });
```

Și am terminat de instalat autoloader.

#### Git
```
git add .
git commit -am "Added composer autoload"
```

---------

#### Câteva cuvinte despre Handlebars

Handlebars este un sistem de templating cross-language. La fel ca și Mustache, este destul de dumb pentru a evita logică complexă în views, dar, spre deosebire de Mustache, este mai intuitiv și mai curat.

De exemplu, în Mustache, indiferent că vrei să verifici o condiție sau să iterezi un loop, vei folosi `{{#foo}}...{{/foo}}`. Handlebars, pe de altă parte, este un pic mai explicit: `{{if foo}}...{{/if}}` (evident, există directive și pentru condiții). Sunt atât de asemănătoare încât până la un punct, Mustache și Handlebars sunt compatibile, fiind interschimbabile.

Un avantaj al unui template Handlebars sau Mustache este că același cod poate fi folosit și în PHP și în JavaScript, existând un parser cam pentru fiecare limbaj cât de cât popular.

Noi îl vom folosi strict pentru a separa codul HTML de PHP, fără să implicăm alte limbaje.

---------

